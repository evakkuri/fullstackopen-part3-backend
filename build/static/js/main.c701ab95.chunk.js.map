{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","services/persons.js","components/PersonsView.js","App.js","index.js"],"names":["Filter","currFilter","onChangeFunction","value","onChange","Notification","messageObj","className","type","text","PersonForm","nameValue","nameChangeHandler","numberValue","numberChangeHandler","addPersonHandler","onSubmit","baseUrl","personsService","getAllPersons","a","request","axios","get","response","data","createPerson","newObject","post","updatePerson","id","put","deletePerson","delete","DeleteButton","personToDelete","allPersons","setPersons","setMessageObj","onClick","console","log","window","confirm","name","then","filter","person","catch","error","setTimeout","Person","number","PersonsView","personsList","personsToShow","toLowerCase","includes","map","App","useState","persons","newName","setNewName","newNumber","setNewNumber","setFilter","useEffect","initialPersons","handleInputFieldChange","eventHandler","event","target","preventDefault","newPerson","personToUpdate","find","p","updated","createdPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c701ab95.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = ({ currFilter, onChangeFunction }) => {\n  return (\n    <div>\n      filter shown with <input\n        value={currFilter}\n        onChange={onChangeFunction}\n      />\n    </div>\n  )\n}\n\nexport default Filter\n","import React from 'react'\n\nconst Notification = ({ messageObj }) => {\n\n  if (messageObj === null) {\n    return null\n  }\n\n  return (\n    <div className={messageObj.type}>\n      {messageObj.text}\n    </div>\n  )\n}\n\nexport default Notification","import React from 'react'\n\nconst PersonForm = ({ nameValue, nameChangeHandler, numberValue, numberChangeHandler, addPersonHandler }) => {\n  return (\n    <form onSubmit={addPersonHandler}>\n      <p>\n        name: <input\n          value={nameValue}\n          onChange={nameChangeHandler}\n        />\n      </p>\n      <p>\n        number: <input\n          value={numberValue}\n          onChange={numberChangeHandler}\n        />\n      </p>\n      <button type=\"submit\">add</button>\n    </form>\n  )\n}\n\nexport default PersonForm","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAllPersons = async () => {\n  const request = axios.get(baseUrl)\n  const response = await request\n  return response.data\n}\n\nconst createPerson = async newObject => {\n  const request = axios.post(baseUrl, newObject)\n  const response = await request\n  return response.data\n}\n\nconst updatePerson = async (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  const response = await request\n  return response.data\n}\n\nconst deletePerson = async (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  const response = await request\n  return response.data\n}\n\nconst personsService = { getAllPersons, createPerson, updatePerson, deletePerson }\n\nexport default personsService","import personsService from '../services/persons'\n\nconst DeleteButton = ({ personToDelete, allPersons, setPersons, setMessageObj }) => {\n  const deletePerson = () => {\n    console.log(`Confirming deletion for person ${personToDelete.id}`)\n\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      console.log(`User confirmed deletion of person ${personToDelete.id}`)\n\n      personsService.deletePerson(personToDelete.id)\n        .then(console.log(`Person ${personToDelete.id} deleted successfully`))\n        .then(setPersons(allPersons.filter(person => person.id !== personToDelete.id)))\n        .catch(error => {\n          console.log(error)\n\n          setMessageObj({\n            type: \"errormsg\",\n            text: `Information of ${personToDelete.name} has already been removed from server`\n          })\n\n          setTimeout(() => setMessageObj(null), 5000)\n        })\n    }\n\n    else console.log(`User cancelled deletion of person ${personToDelete.id}`)\n  }\n\n  return (\n    <button type=\"button\" onClick={deletePerson}>delete</button>\n  )\n}\n\nconst Person = ({ person }) => {\n  return (\n    <>\n      <td>{person.name}</td>\n      <td>{person.number}</td>\n    </>\n  )\n}\n\nconst PersonsView = ({ currFilter, personsList, setPersons, setMessageObj }) => {\n\n  const personsToShow = personsList\n    .filter(person => {\n      return (\n        person.name.toLowerCase().includes(currFilter)\n        || person.number.includes(currFilter)\n      )\n    })\n\n  return (\n    <table>\n      <tbody>\n        {personsToShow.map(person =>\n          <tr key={person.id}>\n            <Person person={person} />\n            <td>\n              <DeleteButton\n                personToDelete={person}\n                allPersons={personsList}\n                setPersons={setPersons}\n                setMessageObj={setMessageObj}\n              />\n            </td>\n          </tr>\n        )}\n      </tbody>\n    </table>\n  )\n}\n\nexport default PersonsView","import React, { useState, useEffect } from 'react'\n\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport PersonForm from './components/PersonForm'\nimport PersonsView from './components/PersonsView'\nimport personsService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [currFilter, setFilter] = useState('')\n  const [messageObj, setMessageObj] = useState(null)\n\n  useEffect(() => {\n    personsService\n      .getAllPersons()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleInputFieldChange = (eventHandler) => {\n    return ((event) => {\n      eventHandler(event.target.value)\n    })\n  }\n\n  const updatePerson = (newPerson) => {\n    console.log(`Person with name ${newName} is already in phonebook, confirming number update`)\n\n    const toUpdate = window.confirm(\n      `${newPerson.name} is already added to phonebook, replace old phone number with the new one?`)\n\n    if (toUpdate) {\n      console.log(`User confirmed update for existing person ${newName}`)\n      console.log(`Updating phone number for person ${newName} to ${newNumber}`)\n\n      const personToUpdate = persons.find(p => p.name === newName)\n      const updated = { ...personToUpdate, number: newNumber }\n\n      personsService\n        .updatePerson(personToUpdate.id, newPerson)\n        .then(() => {\n          setPersons(persons.map(p => p.id !== updated.id ? p : updated))\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n\n    else {\n      console.log(`User cancelled phone number update for person ${newName}`)\n    }\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.map(person => person.name).includes(newName)) {\n      updatePerson(newPerson)\n    }\n\n    else {\n      console.log(\"Creating new person\", newPerson)\n      personsService\n        .createPerson(newPerson)\n        .then(createdPerson => {\n          console.log(\"New person created successfully:\", createdPerson)\n\n          setPersons(persons.concat(createdPerson))\n\n          setMessageObj({\n            type: \"successmsg\",\n            text: `Added ${newName}`\n          })\n\n          setTimeout(() => {\n            setMessageObj(null)\n          }, 2500)\n\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          console.log(error.response.data)\n\n          setMessageObj({\n            type: \"errormsg\",\n            text: error.response.data.error\n          })\n\n          setTimeout(() => {\n            setMessageObj(null)\n          }, 2500)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification messageObj={messageObj} />\n      <Filter currFilter={currFilter} onChangeFunction={handleInputFieldChange(setFilter)} />\n      <h2>Add a new entry</h2>\n      <PersonForm\n        nameValue={newName}\n        nameChangeHandler={handleInputFieldChange(setNewName)}\n        numberValue={newNumber}\n        numberChangeHandler={handleInputFieldChange(setNewNumber)}\n        addPersonHandler={addPerson}\n      />\n      <h2>Numbers</h2>\n      <PersonsView\n        currFilter={currFilter}\n        personsList={persons}\n        setPersons={setPersons}\n        setMessageObj={setMessageObj}\n      />\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}